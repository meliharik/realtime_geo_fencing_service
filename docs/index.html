<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Real-Time Geo-Fencing API Documentation</title>
    <meta name="description" content="High-performance geo-fencing engine for scooter fleet management">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary: #2563eb;
            --text: #1f2937;
            --text-light: #6b7280;
            --border: #e5e7eb;
            --bg: #ffffff;
            --bg-alt: #f9fafb;
            --code-bg: #f3f4f6;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen', 'Ubuntu', sans-serif;
            line-height: 1.6;
            color: var(--text);
            background: var(--bg);
        }

        /* Header */
        .header {
            border-bottom: 1px solid var(--border);
            padding: 1rem 0;
            background: var(--bg);
            position: sticky;
            top: 0;
            z-index: 100;
        }

        .header-content {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 2rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .logo {
            font-size: 1.25rem;
            font-weight: 700;
            color: var(--text);
            text-decoration: none;
        }

        .nav {
            display: flex;
            gap: 2rem;
        }

        .nav a {
            color: var(--text-light);
            text-decoration: none;
            font-size: 0.95rem;
            transition: color 0.2s;
        }

        .nav a:hover {
            color: var(--primary);
        }

        /* Hero */
        .hero {
            padding: 4rem 2rem;
            text-align: center;
            border-bottom: 1px solid var(--border);
        }

        .hero h1 {
            font-size: 3rem;
            margin-bottom: 1rem;
            font-weight: 700;
            letter-spacing: -0.02em;
        }

        .hero p {
            font-size: 1.25rem;
            color: var(--text-light);
            max-width: 600px;
            margin: 0 auto 2rem;
        }

        .hero-buttons {
            display: flex;
            gap: 1rem;
            justify-content: center;
        }

        .btn {
            padding: 0.75rem 1.5rem;
            border-radius: 6px;
            text-decoration: none;
            font-weight: 500;
            font-size: 0.95rem;
            transition: all 0.2s;
            display: inline-block;
        }

        .btn-primary {
            background: var(--primary);
            color: white;
        }

        .btn-primary:hover {
            background: #1d4ed8;
        }

        .btn-secondary {
            border: 1px solid var(--border);
            color: var(--text);
        }

        .btn-secondary:hover {
            border-color: var(--text);
        }

        /* Container */
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 3rem 2rem;
        }

        /* Section */
        .section {
            margin-bottom: 4rem;
        }

        .section h2 {
            font-size: 2rem;
            margin-bottom: 1rem;
            font-weight: 600;
        }

        .section p {
            color: var(--text-light);
            margin-bottom: 2rem;
            font-size: 1.05rem;
        }

        /* Grid */
        .grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 2rem;
            margin-top: 2rem;
        }

        .card {
            padding: 1.5rem;
            border: 1px solid var(--border);
            border-radius: 8px;
            background: var(--bg);
        }

        .card h3 {
            font-size: 1.25rem;
            margin-bottom: 0.5rem;
            font-weight: 600;
        }

        .card p {
            color: var(--text-light);
            font-size: 0.95rem;
            margin: 0;
        }

        /* Code */
        .code-block {
            background: var(--code-bg);
            border: 1px solid var(--border);
            border-radius: 6px;
            padding: 1rem;
            overflow-x: auto;
            font-family: 'Monaco', 'Courier New', monospace;
            font-size: 0.875rem;
            line-height: 1.5;
            margin: 1rem 0;
        }

        .code-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 0.5rem;
            color: var(--text-light);
            font-size: 0.875rem;
        }

        /* API Endpoint */
        .endpoint {
            border: 1px solid var(--border);
            border-radius: 6px;
            margin: 1.5rem 0;
            overflow: hidden;
        }

        .endpoint-header {
            padding: 1rem;
            background: var(--bg-alt);
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .method {
            padding: 0.25rem 0.75rem;
            border-radius: 4px;
            font-size: 0.75rem;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .method.get { background: #dbeafe; color: #1e40af; }
        .method.post { background: #d1fae5; color: #065f46; }

        .endpoint-path {
            font-family: 'Monaco', 'Courier New', monospace;
            font-size: 0.875rem;
        }

        .endpoint-body {
            padding: 1rem;
        }

        .endpoint-body p {
            margin: 0 0 1rem 0;
            font-size: 0.95rem;
        }

        /* Stats */
        .stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 2rem;
            margin: 2rem 0;
        }

        .stat {
            text-align: center;
            padding: 1.5rem;
            border: 1px solid var(--border);
            border-radius: 8px;
        }

        .stat-value {
            font-size: 2.5rem;
            font-weight: 700;
            color: var(--primary);
            display: block;
            margin-bottom: 0.25rem;
        }

        .stat-label {
            color: var(--text-light);
            font-size: 0.875rem;
        }

        /* Footer */
        .footer {
            border-top: 1px solid var(--border);
            padding: 3rem 2rem;
            text-align: center;
            color: var(--text-light);
            font-size: 0.875rem;
        }

        .footer a {
            color: var(--primary);
            text-decoration: none;
        }

        /* Responsive */
        @media (max-width: 768px) {
            .hero h1 { font-size: 2rem; }
            .hero p { font-size: 1rem; }
            .nav { display: none; }
            .grid { grid-template-columns: 1fr; }
        }
    </style>
</head>
<body>
    <header class="header">
        <div class="header-content">
            <a href="index.html" class="logo">Geo-Fencing API</a>
            <nav class="nav">
                <a href="#overview">Overview</a>
                <a href="#quickstart">Quick Start</a>
                <a href="#api">API Reference</a>
                <a href="https://github.com/meliharik/realtime-geo-fencing-service">GitHub</a>
            </nav>
        </div>
    </header>

    <section class="hero">
        <h1>Real-Time Geo-Fencing API</h1>
        <p>High-performance geo-fence violation detection for scooter fleet management. Process thousands of GPS events per second with sub-millisecond response times.</p>
        <div class="hero-buttons">
            <a href="#quickstart" class="btn btn-primary">Get Started</a>
            <a href="https://github.com/meliharik/realtime-geo-fencing-service" class="btn btn-secondary">View on GitHub</a>
        </div>
    </section>

    <div class="container">
        <section class="section" id="overview">
            <h2>Overview</h2>
            <p>A production-ready geo-fencing engine designed to detect when scooters enter restricted no-parking zones in real-time using advanced spatial algorithms and caching strategies.</p>

            <div class="stats">
                <div class="stat">
                    <span class="stat-value">0.1ms</span>
                    <span class="stat-label">Cache Hit Response</span>
                </div>
                <div class="stat">
                    <span class="stat-value">5,000+</span>
                    <span class="stat-label">Events/Second</span>
                </div>
                <div class="stat">
                    <span class="stat-value">50x</span>
                    <span class="stat-label">Performance Boost</span>
                </div>
                <div class="stat">
                    <span class="stat-value">99%</span>
                    <span class="stat-label">Cache Hit Rate</span>
                </div>
            </div>
        </section>

        <section class="section">
            <h2>Key Features</h2>
            <div class="grid">
                <div class="card">
                    <h3>Real-Time Detection</h3>
                    <p>Sub-millisecond violation detection with Redis caching and in-memory spatial queries using JTS.</p>
                </div>
                <div class="card">
                    <h3>WebSocket Streaming</h3>
                    <p>Live GPS data streaming with STOMP protocol for real-time event processing and alerts.</p>
                </div>
                <div class="card">
                    <h3>PostGIS Spatial Queries</h3>
                    <p>Advanced geometric operations with PostgreSQL PostGIS extension and GiST indexes.</p>
                </div>
                <div class="card">
                    <h3>Redis Caching</h3>
                    <p>10-50x performance improvement using cache-aside pattern with automatic fallback.</p>
                </div>
                <div class="card">
                    <h3>Rate Limiting</h3>
                    <p>Intelligent duplicate violation prevention with configurable time windows.</p>
                </div>
                <div class="card">
                    <h3>Production Ready</h3>
                    <p>Docker Compose setup, health checks, metrics, and comprehensive test coverage.</p>
                </div>
            </div>
        </section>

        <section class="section" id="quickstart">
            <h2>Quick Start</h2>

            <h3>1. Prerequisites</h3>
            <div class="code-block">
                <div class="code-header">bash</div>
                <pre>docker-compose up -d postgres redis</pre>
            </div>

            <h3>2. Run Application</h3>
            <div class="code-block">
                <div class="code-header">bash</div>
                <pre>mvn spring-boot:run</pre>
            </div>

            <h3>3. Test the API</h3>
            <div class="code-block">
                <div class="code-header">bash</div>
                <pre>curl -X POST http://localhost:8080/api/geofencing/check \
  -H "Content-Type: application/json" \
  -d '{
    "scooterId": "SC-001",
    "latitude": 37.7800,
    "longitude": -122.4150,
    "timestamp": "2024-01-01T12:00:00Z"
  }'</pre>
            </div>

            <h3>4. Explore Interactive Documentation</h3>
            <div class="code-block">
                <div class="code-header">browser</div>
                <pre>http://localhost:8080/swagger-ui.html</pre>
            </div>
        </section>

        <section class="section" id="api">
            <h2>API Reference</h2>
            <p>The API provides both REST and WebSocket endpoints for real-time geo-fence violation detection.</p>

            <div class="endpoint">
                <div class="endpoint-header">
                    <span class="method post">POST</span>
                    <span class="endpoint-path">/api/geofencing/check</span>
                </div>
                <div class="endpoint-body">
                    <p>Check if a GPS coordinate violates any no-parking zones.</p>
                    <div class="code-block">
                        <div class="code-header">Request</div>
                        <pre>{
  "scooterId": "SC-001",
  "latitude": 37.7800,
  "longitude": -122.4150,
  "timestamp": "2024-01-01T12:00:00Z"
}</pre>
                    </div>
                    <div class="code-block">
                        <div class="code-header">Response</div>
                        <pre>{
  "status": "VIOLATION",
  "message": "Zone violation detected!",
  "scooterId": "SC-001",
  "violations": [{
    "violationId": "VIO-123",
    "zoneName": "Downtown SF",
    "severity": "HIGH",
    "timestamp": "2024-01-01T12:00:00Z"
  }]
}</pre>
                    </div>
                </div>
            </div>

            <div class="endpoint">
                <div class="endpoint-header">
                    <span class="method get">GET</span>
                    <span class="endpoint-path">/api/geofencing/zones</span>
                </div>
                <div class="endpoint-body">
                    <p>Get all active no-parking zones.</p>
                </div>
            </div>

            <div class="endpoint">
                <div class="endpoint-header">
                    <span class="method get">GET</span>
                    <span class="endpoint-path">/api/geofencing/cache/stats</span>
                </div>
                <div class="endpoint-body">
                    <p>Get Redis cache statistics and health metrics.</p>
                </div>
            </div>

            <div class="endpoint">
                <div class="endpoint-header">
                    <span class="method get">GET</span>
                    <span class="endpoint-path">/api/geofencing/violations/{scooterId}</span>
                </div>
                <div class="endpoint-body">
                    <p>Get violation history for a specific scooter.</p>
                </div>
            </div>

            <p style="margin-top: 2rem;">For complete API documentation with interactive testing, run the application locally and visit the Swagger UI at <strong>http://localhost:8080/swagger-ui.html</strong></p>
        </section>

        <section class="section">
            <h2>Architecture</h2>
            <p>The system uses a cache-aside pattern with automatic fallback to ensure high performance and reliability:</p>

            <div class="card" style="margin-top: 1rem;">
                <ol style="margin-left: 1.5rem; color: var(--text-light);">
                    <li><strong style="color: var(--text);">GPS Event Received</strong> - Via REST API or WebSocket</li>
                    <li><strong style="color: var(--text);">Cache Check</strong> - Query Redis for cached zones (~0.1-0.5ms)</li>
                    <li><strong style="color: var(--text);">Spatial Query</strong> - JTS point-in-polygon check in-memory</li>
                    <li><strong style="color: var(--text);">Database Fallback</strong> - PostGIS query if cache miss (~5-10ms)</li>
                    <li><strong style="color: var(--text);">Rate Limiting</strong> - Check for duplicate violations</li>
                    <li><strong style="color: var(--text);">Persist & Alert</strong> - Save to database and broadcast via WebSocket</li>
                </ol>
            </div>
        </section>

        <section class="section">
            <h2>Technology Stack</h2>
            <div class="grid">
                <div class="card">
                    <h3>Java 17</h3>
                    <p>Modern Java with records, text blocks, and pattern matching</p>
                </div>
                <div class="card">
                    <h3>Spring Boot 3.2</h3>
                    <p>REST API, WebSocket, JPA, and actuator metrics</p>
                </div>
                <div class="card">
                    <h3>PostgreSQL + PostGIS</h3>
                    <p>Spatial database with GiST indexes for O(log n) queries</p>
                </div>
                <div class="card">
                    <h3>Redis</h3>
                    <p>In-memory caching for 50x performance improvement</p>
                </div>
                <div class="card">
                    <h3>JTS Topology Suite</h3>
                    <p>In-memory geometric operations and spatial analysis</p>
                </div>
                <div class="card">
                    <h3>Docker Compose</h3>
                    <p>Containerized development environment</p>
                </div>
            </div>
        </section>
    </div>

    <footer class="footer">
        <p>Built with Spring Boot, PostGIS, Redis, and WebSockets</p>
        <p style="margin-top: 0.5rem;">
            <a href="https://github.com/meliharik/realtime-geo-fencing-service">GitHub</a> â€¢
            <a href="https://github.com/meliharik/realtime-geo-fencing-service/blob/main/LICENSE">MIT License</a>
        </p>
    </footer>
</body>
</html>
